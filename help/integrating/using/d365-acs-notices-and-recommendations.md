---
solution: Campaign Standard
product: campaign
title: キャンペーンとMicrosoft Dynamics 365データ管理
description: Campaign StandardとMicrosoft Dynamics 365で共通データを管理する方法を説明します
audience: integrating
content-type: reference
topic-tags: working-with-campaign-and-ms-dynamics
feature: Microsoft CRM統合
role: Data Architect
level: 経験豊富な
translation-type: tm+mt
source-git-commit: 088b49931ee5047fa6b949813ba17654b1e10d60
workflow-type: tm+mt
source-wordcount: '2473'
ht-degree: 1%

---


# ベストプラクティスと制限事項 {#acs-msdyn-best-practices}

## データの管理{#acs-msdyn-manage-data}

連絡先エンティティとカスタムエンティティの同期の場合、この統合は&#x200B;**Microsoft Dynamics 365を真のソース**&#x200B;として扱います。  同期された属性に対する変更は、Adobe Campaign StandardではなくDynamics 365で行う必要があります。  キャンペーンで変更が行われると、同期中にキャンペーン上で上書きされる可能性があります。これは、同期が一方向に行われるためです。

オプションで、Dynamics 365で連絡先が削除された場合に、プロファイルの削除呼び出しをキャンペーンに発行するように統合を設定し、データの整合性を維持できます。 ただし、プロファイルの削除は、プライバシーの削除とは異なります。 キャンペーン内のプライバシー削除により、キャンペーンプロファイルレコードと関連するログエントリが削除されます。一方、正規プロファイルの削除では、キャンペーンプロファイルレコードのみが削除され、残りはキャンペーンログに残ります。 統合でプロファイルの削除機能が有効になっている場合は、データの件名のプライバシー要求を適切に処理するために、追加の手順を実行する必要があります。 ](#manage-privacy-requests)の下の[プライバシーセクションの手順を参照してください。

## プライバシー{#acs-msdyn-manage-privacy}

この統合は、Microsoft Dynamics 365とAdobe Campaign Standardの間でエンドユーザーデータを転送するように設計されています。 このデータは、エンドユーザーのデータに含まれる場合は個人情報を含みます。  お客様の会社は、データ管理者として、個人データの収集と使用に適用されるプライバシーに関する法令に準拠する責任を負います。

この統合は、エンドユーザーデータ（エンドユーザーデータに個人情報が含まれる場合は、その個人情報を含む）をMicrosoft Dynamics 365とAdobe Campaign Standard間で転送するように設計されています。 お客様の会社は、データ管理者として、個人データの収集と使用に適用されるプライバシーに関する法令に準拠する責任を負います。

統合では、データ・サブジェクト・プライバシー（GDPRなど）の削除や他のプライバシー要求（オプトアウトを除く）の処理は一切行われません。 プライバシー要求を処理する場合は、Microsoft Dynamics 365とキャンペーン(Adobe Experience Platform Privacy Service経由)の両方で、個別に処理する必要があります。

Dynamics 365で連絡先が削除された場合に、キャンペーンに対して定期的なプロファイル削除呼び出しを発行するように統合を設定した場合は、次の手順に従う必要があります。 この処理中に、対象のレコードに対して更新が行われていないことを確認します。

1. [Adobe Experience Platform Privacy Service](https://www.adobe.io/apis/experiencecloud/gdpr.html)にプライバシー削除要求を発行

1. 要求が正常に完了するまで監視する

1. レコードがキャンペーンインスタンスに存在しないことを確認します

1. （その後すぐ）Dynamics 365内でプライバシーの削除を発行します

1. レコードが両方のシステムから削除されたことを確認します

次のリンクは、各システムにアクセス権を実装したり、プライバシー関連のリクエストを削除したりする際の参考になります。

* [Microsoft Dynamics 365](https://docs.microsoft.com/en-us/dynamics365/get-started/gdpr/)

* [Adobe Campaign Standard](https://experienceleague.adobe.com/docs/experience-platform/privacy/home.html)

>[!IMPORTANT]
>
>キャンペーンのカスタムリソースレコードに、キャンペーンの使用に応じた個人情報が含まれる場合は、そのレコードを対応するキャンペーンプロファイルレコード（直接または他のカスタムリソースを介して）にリンクし、プロファイルレコードのプライバシー関連の削除で個人情報を含むリンクカスタムリソースレコードも削除できます。エンティティ間のリンクおよび削除のオプションは、リンクされたレコードをカスケード形式で削除できるように設定する必要があります。 個人情報は、プロファイルにリンクされていないカスタムリソースに入力しないでください。

## オプトアウト {#opt-out}

Microsoft Dynamics 365とキャンペーンのオプトアウト属性の違いと、各顧客のビジネス要件の違いにより、オプトアウトマッピングは、顧客が完了するための演習として残されています。  エンドユーザーのオプトアウト設定が維持され、オプトアウトしたチャネルを介した通信を受け取らないように、オプトアウトがシステム間で適切にマッピングされるようにすることが重要です。

オプトアウトマッピングでは、次の項目のみが使用できることに注意してください。

* プレフィックス「次の連絡先はありません」を持つキャンペーン属性（例：電子メールによる連絡がなくなります）、または

* CCPAの特定の属性

プロファイルエンティティのフィールドに関する詳細は、[ここ](../../developing/using/datamodel-profile.md)を参照してください。

Dynamics 365では、ほとんどのオプトアウトフィールドには「ドノット」プレフィックスが付きますが、データタイプと互換性がある場合は、他の属性もオプトアウト用に利用できます。

統合をプロビジョニングする際、ビジネスに必要なオプトアウト設定を指定できます。

* **単方向(Microsoft Dynamics 365からキャンペーン)**:Dynamics 365は、オプトアウトの真実の源です。オプトアウト属性は、Dynamics 365からCampaign Standardに一方向で同期されます
* **単方向(Microsoft Dynamics 365とのキャンペーン)**:Campaign Standardは、オプトアウトの真の原因です。オプトアウト属性は、Campaign StandardからDynamics 365への一方向で同期されます
* **双方向**:Dynamics 365 ANDCampaign Standardはどちらも真実の源です。オプトアウト属性は、Campaign StandardとDynamics 365の間で双方向に同期されます

また、システム間のオプトアウト同期を別のプロセスで管理する場合は、統合のオプトアウトデータフローを無効にできます。

双方向オプトアウト設定では、ロジックを使用して、両方のシステムに書き込む値が決定されます。 このロジックは、2つのシステム間のタイムスタンプ(Dynamics 365でのレコードレベルの変更、キャンペーンの属性レベルの変更)を比較して、どのシステムが使用されるかを判断します。 キャンペーンに、より新しいタイムスタンプが含まれている場合は、キャンペーン値が使用されます。 Dynamics 365により新しいタイムスタンプが含まれている場合、または同じ場合は、opt-out=TRUEが勝ちます（値の1つがTRUEの場合）。

[このセクション](../../integrating/using/d365-acs-self-service-app-data-sync.md#opt-in-out-wf)でオプトイン/オプションを選択する方法を説明します。

>[!NOTE]
>
>必要に応じて、Adobe Campaignのデフォルトおよび特定のタイポロジルールを確認し、変更を行う前に、デフォルトおよび特定の通信を更新して、すべての送信通信にその変更が正しく適用されることを確認してください。 例えば、オプトアウトの環境設定へのマッピングには、受信者の意図/コミュニケーションの選択が正確に反映され、顧客注文の確認など、関係の配信やトランザクションメッセージのが誤って中止されないようにしてください。

**双方向**&#x200B;または&#x200B;**単方向(Microsoft Dynamics 365へのキャンペーン)**&#x200B;オプトアウト構成を選択した場合、キャンペーンオプトアウトデータは、キャンペーンのSFTPストレージ領域にワークフローを介して定期的にエクスポートされます(下記の「キャンペーンSFTPの使用」を参照)。 キャンペーンのオプトアウトワークフローの実行が停止するイベントでは、オプトアウトの同期が失敗する可能性を減らすために、できる限り早く手動で再起動する必要があります。

>[!IMPORTANT]
>
>**双方向**&#x200B;または&#x200B;**単方向(Microsoft Dynamics 365へのキャンペーン)**&#x200B;オプトアウト構成が必要な場合は、Adobeのテクニカルコンタクトに、キャンペーンインスタンスに設定するオプトアウトワークフローを依頼する必要があります

## キャンペーンSFTPの使用

キャンペーンのSFTPストレージは、次の使用例で統合が利用する必要があります。  これらの使用例に対応するために、SFTPアカウントに十分なストレージ容量があることを確認する必要があります。 SFTPのストレージ容量がライセンスを超えると、キャンペーン、統合、および/またはSFTPアカウントの機能的使用が著しく損なわれる場合があります。

| 使用例 | 説明 |
|---|---|
| 双方向および単方向(Microsoft Dynamics 365とのキャンペーン) | 双方向および単方向(Microsoft Dynamics 365とのキャンペーン)オプトアウトデータフローは、キャンペーンSFTPストレージを利用します。 キャンペーンワークフローは、増分変更をSFTPフォルダーにエクスポートします。 このページから、統合がレコードとプロセスを取得します。 |
| オプトアウトログ | 統合のトラブルシューティングを行う場合、コネクタからの出力ログが役立ちます。 出力ログのオン/オフを切り替えることができます。 |


>[!IMPORTANT]
>
>SFTPフォルダーにアクセスし、SFTPフォルダーからダウンロードする情報は、ユーザーが管理する必要があります。 個人情報が含まれる場合は、プライバシーに関する法令に準拠する責任があります。 [詳細情報](#acs-msdyn-manage-privacy)。

## データ管理

### 既存のキャンペーンデータ

この統合は、Microsoft Dynamics 365の連絡先とカスタムエンティティをキャンペーンに同期します。 統合の外部で作成されたキャンペーンレコード（同期ジョブで作成されたものではない）は、統合によって変更されません。統合設定時に存在するキャンペーンレコードも含まれます。

この統合では、キャンペーンの&#x200B;**[!UICONTROL externalId]**&#x200B;フィールドを使用してDynamics 365の連絡先レコードとキャンペーンプロファイルレコードを同期するので、Microsoft Dynamics 365から同期するレコードには、このキャンペーンフィールド(**[!UICONTROL externalId]**)にMicrosoft Dynamics 365 **[!UICONTROL contactId]**&#x200B;を入力する必要があります。  また、カスタムエンティティはMicrosoft Dynamics 365の一意のIDを使用して同期されます。 キャンペーンのカスタムエンティティでは、このID属性をテーブル列として含める必要があります。 externalId列は、この属性値の格納に使用できますが、キャンペーンのカスタムエンティティには必要ありません。

ただし、Microsoft Dynamics 365が真実の原因であり、Dynamics 365側の更新をキャンペーンが検出した場合は、統合プロファイルデータを上書きできます。  既存のデプロイメントに応じて、統合を有効にするために必要なその他の手順もあります。したがって、Adobeのテクニカルコンタクトと緊密に連絡を取ることをお勧めします。

>[!NOTE]
>
>既存のお客様のデプロイメントは複雑なので、統合の計画と設定を行う際は、Adobeのテクニカルコンタクトにご相談することをお勧めします。

### データ同期の頻度

統合は、Microsoft Dynamics 365で更新が発生した直後に、更新を検出し、処理「キュー」に追加できるアーキテクチャを利用します（バッチ処理ではなくストリーミング）。 このため、データ・フローの実行頻度またはスケジュールを指定する必要はありません。

ただし、双方向とDynamics 365オプトアウトデータフローへのキャンペーンは例外です。 これらのオプトアウト設定では、更新されたキャンペーンレコードがキャンペーンワークフローを介して1日1回SFTPにエクスポートされ、統合ツールがその後ファイルを読み取ってレコードを処理します。

### データ使用規約

EMEAまたはAPAC地域にお住まいの場合、一部のデータは、この統合の一環として米国で処理されます。 詳しくは、[こちらの節](../../reporting/using/about-dynamic-reports.md#dynamic-reporting-usage-agreement)を参照してください。

## ガードレールと制限

>[!IMPORTANT]
>
>特定のアクション（レコードの初期取り込み、レコードデータの再生など） Microsoft Dynamics 365からAdobe Campaignインスタンスに大量のレコードが取り込まれる可能性があります。 パフォーマンスの問題のリスクを軽減するには、すべてのキャンペーンプロセス(マーケティングアクティビティなし、ワークフローの実行なしなど)を停止することをお勧めします。 大量の記録がキャンペーンに取り込まれるまで

### カスタムエンティティ

[Microsoft Dynamics 365-Adobe Campaign Standard統合](../../integrating/using/d365-acs-get-started.md)は、カスタムエンティティをサポートしており、Dynamics 365のカスタムエンティティをキャンペーン内の対応するカスタムリソースと同期できます。

統合では、リンクされたテーブルとリンクされていないテーブルの両方がサポートされます。

カスタムエンティティデータフローを設定する場合は、次の点に注意してください。

* キャンペーンのカスタムリソースを作成および変更する操作は、機密性の高い操作です。この操作は、エキスパートユーザーのみが実行する必要があります。
* カスタムエンティティデータフローの場合、同期されたカスタムエンティティに対して、Dynamics 365内で変更追跡を有効にする必要があります。
* Dynamics 365で親子レコードとリンク子レコードがほぼ同時に作成された場合、統合の並行処理が原因で、新しい子レコードが親レコードの前にキャンペーンに書き込まれる可能性が少しあります。

* 親レコードと子レコードがキャンペーン側で&#x200B;**1基の基数単純リンク**&#x200B;オプションを使用してリンクされている場合、親レコードがキャンペーンに到達するまで、子レコードは非表示になり、アクセスできなくなります。

* (キャンペーン内の&#x200B;**1個の基数単純リンク**)Dynamics 365で子レコードが更新または削除され、親レコードがキャンペーンに表示される前にその変更がキャンペーンに書き込まれた場合、その更新または削除はキャンペーンで処理されず、エラーが発生します。 更新の場合、更新したレコードを同期するには、問題のレコードをDynamics 365で再び更新する必要があります。 削除の場合、削除または更新するDynamics 365にレコードがなくなったので、問題のレコードは、キャンペーン側で別々に処理する必要があります。

* 非表示の子レコードがあり、それらにアクセスできないと思われる状況に陥った場合は、カーディナリティリンクの種類を&#x200B;**0または1カーディナリティ単純リンク**&#x200B;に一時的に変更して、これらのレコードにアクセスできます。

キャンペーンのカスタムリソースの詳細な概要は、この節](../../developing/using/key-steps-to-add-a-resource.md)に[あります。

### 統合ガードレール

この統合の使用を計画する際は、次のガードレールを考慮する必要があります。 これらのガードレールを超過したと思われる場合は、Adobeのテクニカル担当者にお問い合わせください。

* 統合によって生成されるキャンペーン呼び出しの量をサポートするには、適切なエンジンパッケージをライセンス認証する必要があります。 ライセンスされたエンジン呼び出しの量を超えると、キャンペーンのパフォーマンスが低下する可能性があります。

   統合からエンジン呼び出しの量を見積もる際には、次の情報を使用します。

   * レコードの挿入（新しいレコードなど）:1エンジンコール
   * レコードの削除：1エンジンコール
   * レコードの更新：2エンジンコール(宛先レコードがソースレコードと同一の場合、つまりキャンペーンレコードに変更がない場合は1回のコールのみ)

   キャンペーンエンジンの全体的な呼び出し数を見積もる際には、ランディングページ、WebApp、JSSP、API、モバイルアプリ登録など、他のエンジン呼び出し元を考慮に入れることが重要です。

   表示キャンペーンパッケージの情報は、こちらを参照してください。https://helpx.adobe.com/legal/product-descriptions/campaign-standard.html

* 統合でサポートされる連絡先は最大3,000万件です。

* 標準の統合機能では、最大5つのカスタムエンティティがサポートされ、それぞれのサイズは最大50列です。

* 統合を実装する前に、カスタムリソースを作成して発行する必要があります。

* テーブルをリンクする場合の最大テーブル深度は2つ（例：table1->table2->table3）です。

* Microsoft Dynamic 365のデータ型は限定的にサポートされます。 データモデルに単純なデータ型以外のデータ型が含まれる場合（例：文字列、整数、小数など）、統合を使用する前にデータモデルの更新が必要になる場合があります。

* キャンペーンのカスタムエンティティで既存のデータを保持する場合は、統合用のデータを準備する必要があります。

* Adobeとお客様の間でオンボーディングメンテナンスウィンドウを確立する必要がある場合があります。

* 統合の使用量の大幅な増加や「急増」（新規レコードや更新されたレコードの急増など）は、データ同期の遅れの原因となる場合があることに注意してください。

* 統合の一環として、Microsoft AzureとDynamics 365の統合前の構成手順を完了する必要があります。 このページ](../../integrating/using/d365-acs-configure-d365.md)の設定手順[を参照

* Dynamics 365とキャンペーンデータモデルを統合に持ち込み、それらを維持することが期待されます。

### 統合の境界

統合は、Microsoft Dynamics 365とキャンペーンの間の一般的なデータ移動の一般的な使用例を解決するように設計されていますが、各顧客に固有のすべての使用例に対応するためのものではありません。

* 統合は、プライバシー（GDPRなど）の削除を発行しません。 エンドユーザーのプライバシー要求を満たす責任は、お客様次第です。このような要求は、(Adobe Experience Platform Privacy Service経由の)キャンペーンとDynamics 365の両方で個別に行う必要があります。 必要に応じて、統合によって定期的な削除が行われ、データの同期に役立ちます。   詳しくは、[「プライバシー」セクション](#manage-privacy-requests)を参照してください。

* オプトアウトプロファイルを除き（お客様が設定した場合）、キャンペーンからDynamics 365への情報やカスタムエンティティデータは同期されません。

* キャンペーン購読の管理（サブスクリプション/サブスクリプション解除など）はネイティブではサポートされていません。

* Dynamics 365内からのキャンペーン電子メールキャンペーンの構成およびトリガーはサポートされていません。

* 統合は、****&#x200B;では、Dynamics 365とCampaign Standardデータモデルの間のデータのリモデリングをサポートしません。 統合では、1つのDynamics 365テーブルを1つのキャンペーンテーブルに同期することが予想されます。
