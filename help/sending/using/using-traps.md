---
title: トラップの使用
description: メッセージでトラップを使用する方法を説明します。
audience: sending
content-type: reference
topic-tags: preparing-and-testing-messages
context-tags: seedMember,overview
feature: Seed Address
role: User
level: Intermediate
exl-id: 0482a946-35b1-426f-8505-42adcd1c3bbb
source-git-commit: ee3ab5304e80ea098f7e172f6b3f4af4324e8eb4
workflow-type: tm+mt
source-wordcount: '458'
ht-degree: 2%

---

# トラップの使用 {#using-traps}

トラップを使用すると、メッセージはメインターゲットに送信されるのと同じように [ テストプロファイル ](../../audiences/using/managing-test-profiles.md) に送信され、クライアントファイルが不正に使用されているかどうかを識別する手段となります。

トラップは、もともとダイレクトメール配信用に設計されていました。 次の操作が可能です。

* ダイレクトメールプロバイダーが実際に通信を送信していることを確認します。
* 顧客と同じ条件で同時にメールを受信します。
* 送信されたメールの正確なコピーを保存します。
* クライアントリストがダイレクトメールプロバイダーによって誤って使用されていないことを確認します。 実際、テストプロファイルのアドレスに他の通信が送信された場合、クライアントファイルが知らずに使用されている可能性があります。 そのため、テストプロファイルのアドレスは、この目的にのみ使用する必要があります。

ダイレクトメールのオーディエンスに対するトラップの追加について詳しくは、[ テストプロファイルとトラッププロファイルの追加 ](../../channels/using/defining-the-direct-mail-audience.md#adding-test-and-trap-profiles) を参照してください。

その他の通信チャネルの場合は、次の目的でメインターゲットにトラップテストプロファイルを追加できます。

* メッセージが正常に送信されたことを確認します。
* メッセージの正確なコピーを取得して保持します。
* 送信および受信日時を追跡します。

テストプロファイルをトラップとして使用するには、メッセージのオーディエンスに含める必要があります。

>[!NOTE]
>
>[ 配達確認 ](../../sending/using/sending-proofs.md) または [ メールレンダリング ](../../sending/using/email-rendering.md) に使用するテストプロファイルとは異なり、メッセージはメインターゲットと、トラップとして使用されるテストプロファイルに同時に送信されます。

メッセージのオーディエンスを定義する場合

1. 「**[!UICONTROL Test profiles]**」タブから、テストプロファイルを選択します。 意図した用途として **[!UICONTROL Trap]** が設定されていることを確認します。

   ![](assets/trap_select.png)

1. メッセージコンテンツの準備が整ったら、「**[!UICONTROL Prepare]**」ボタンをクリックします。 [ 送信の準備 ](../../sending/using/preparing-the-send.md) を参照してください。
   >[!NOTE]
   >
   >メインターゲットを選択していることを確認します。 そうしないと、メッセージを送信できません。

1. 「**[!UICONTROL Confirm]**」ボタンをクリックします。[送信の確認](../../sending/using/confirming-the-send.md)を参照してください。

   ![](assets/trap_confirm.png)

メッセージがメインターゲットとテストプロファイルに送信されます。

トランザクションメッセージを送信する際に、トラップを使用できます。 この場合、テストプロファイルはイベント設定ごとに 1 つのメッセージを受け取ります。 トランザクションメッセージについて詳しくは、この [ 節 ](../../channels/using/getting-started-with-transactional-msg.md) を参照してください。

>[!NOTE]
>
>テストプロファイルをトラップとして使用する場合、メッセージ内のエンリッチメントされたフィールドには、対応する追加データが実際のターゲットプロファイルからランダムに選択され、トラップのテストプロファイルに割り当てられます。 ただし、最初のメッセージの準備時に適用されたタイポロジルールが原因で実際のターゲットプロファイルが除外された場合は、配信の準備に失敗することに注意してください。 このエラーは、エンリッチメントされたフィールド値をトラッププロファイルに置き換えることができないために発生します。 その結果、除外タイポロジルールが実際の受信者に正しく適用されない場合があります。
>
>この状況を防ぐには、トランザクションタイポロジで、トラップテストプロファイルをフィルタリングルールまたは疲労ルールと同時に使用しないでください。 エンリッチメントについての詳細を表示 エンリッチメントについて詳しくは、[ この例 ](../../automating/using/enriching-profile-data-file.md) を参照してください。
