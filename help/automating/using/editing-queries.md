---
title: クエリーの編集
description: 定義済みのフィルターとルールを使用して、母集団を構築します。
page-status-flag: 非活性化の
uuid: a49c7739-a96c-45cb-9ac5-1ce299161a97
contentOwner: ソビア
products: SG_CAMPAIGN/STANDARD
audience: 自動化
content-type: 参照
topic-tags: filtering-data
discoiquuid: 84306a1e-0d9f-44cc-88a7-36d7e5b4da1f
context-tags: queryFilter,overview;audience,main
internal: n
snippet: y
translation-type: tm+mt
source-git-commit: 00fc2e12669a00c788355ef4e492375957cdad2e

---


# クエリーの編集{#editing-queries}

## クエリーエディターについて {#about-query-editor}

クエリエディターは、Adobe Campaignデータベースに含まれるデータをフィルタリングするためのウィザードです。

この機能を使用すると、事前に定義されたフィルターとルールにより、受信者をより適切にターゲット設定できる訪問者を作成できます。

アプリケーションの機能の中には、次の目的で使用するものがあります。

* クエリタイプ **のオーディエ** ンスを **作成**
* 電子メールタ **ーゲット** の定義
* ワークフローアクティビティ **での訪問** 者の定義

## クエリーエディターインターフェイス {#query-editor-interface}

クエリーエディターは、パレットとワークス **ペース** で構成さ **れます**。

![](assets/query_editor_overview.png)

### パレット {#palette}

エディタの左側にあるパレットは2つのタブに分割され、主題ブロックに分割された要素が含まれます。 以下のタブがあります。

* 「ショ **ートカット**」は、デフォルトで使用できるほか、インスタンス管理者が作成します。 フィールド、ノード、グループ、1-1リンク、1-Nリンク、その他の定義済みフィルターが表示されます。
* ターゲ **ット** ・リソース内の使用可能なすべてのフィールドにアクセスできるエクスプローラ。ノード、グループ化要素、リンク（1-1および1-N）。

クエリーを設定して考慮するには、タブに含まれる要素をワークスペースに移動する必要があります。 選択したターゲットディメンションに応じて(ディメンシ [ョンとリソースのターゲット](../../automating/using/query.md#targeting-dimensions-and-resources))、次の操作を実行できます。

* オーディエンスまたはプロファイルを1つずつ選択
* 定義済みフィルターの使用
* 選択したフィールドに対する単純なルールの定義
* 特定のフィールドに関数を適用できる高度なルールの定義

### ワークスペース {#workspace}

ワークスペースは、パレットから追加されたルール、オーディエンス、定義済みのフィルターを設定および組み合わせできる中央のゾーンです。

パレットから要素をワークスペースに移動すると、新しいウィンドウが開き、クエリーの作成を開始で [きます](#creating-queries)。

## クエリの作成 {#creating-queries}

クエリエディターを使用して、メッセージ内のオーディエンスまたはテストプロファイル、ワークフロー内の訪問者、およびクエリタイプオーディエンスを作成できます。

クエリーは、配信の作成時にウィン **[!UICONTROL Audience]** ドウで定義したり、ワークフローの作成時に **Query** アクティビティで定義したりできます。

1. 要素をパレットからワークスペースに移動します。 ルールを編集するウィンドウが開きます。

   * 文字列フィールドまたは数 **値フィールドの**&#x200B;場合は、比較演算子と値を指定します。

      ![](assets/query_editor_audience_definition2.png)

   * 日付または日付と時間フィー **ルドの場合**、特定の日付、2つの日付の間の範囲、またはクエリの実行日を基準とした期間を定義できます。

      ![](assets/query_editor_date_field.png)

   * ブール型フィールド **の場合**、フィールドに設定可能な値にリンクされているチェックボックスをオンにします。
   * グループ **化フィールドの場合** 、ルールを作成するグループ化フィールドを選択し、他のフィールドと同じ方法で条件を定義します。

      ![](assets/query_editor_audience_definition4.png)

   * 別のデー **タベースリソースとの** 1-1リンクの場合は、ターゲットとするテーブルから直接値を選択します。

      ![](assets/query_editor_audience_definition5.png)

   * 別のデー **タベースリソースとの** 1-Nリンクの場合は、この2番目のリソースのフィールドにサブクエリを定義できます。

      サブ条件を指定する必要はありません。

      例えば、プロファイル追跡ログで演算子を選 **[!UICONTROL Exists]** 択し、ルールを承認することしかできません。 このルールは、トラッキングログが存在するすべてのプロファイルを返します。

      ![](assets/query_editor_audience_definition6.png)

   * 定義済みのフ **ィルターの場合**、提供された条件に従って、必要な要素を入力または選択します。

      管理者は、複雑で反復的なクエリーを容易にするフィルターを作成できます。 これらは事前設定されたルールの形式でクエリエディターに表示され、ユーザーが実行する必要のある手順の数を制限します。

      ![](assets/query-editor_filter_email-audience_filter.png)

1. ルールの名前を指定できます。 これは、ワークスペースでルール名として表示されます。 ルールに名前が付けられていない場合は、条件の自動説明が表示されます。
1. ワークスペース要素を組み合わせるには、それらを相互に連動させて、異なるグループやグループレベルを作成します。 次に、論理演算子を選択して、同じレベルの要素を組み合わせることができます。

   * **[!UICONTROL AND]**:2つの条件の交差。 各条件に一致する要素のみが考慮されます。
   * **[!UICONTROL OR]**:2つの条件の和。 2つの条件の少なくとも1つに一致する要素が考慮されます。
   * **[!UICONTROL EXCEPT]**:除外条件。 最初の条件に一致する要素も、2番目の条件に一致しない限り、考慮されます。

1. アクションバーのボタンとボタンを使用して、クエリーの対象となる要素数を計算し、プ ![](assets/count.png) レビュー ![](assets/preview.png) できるようになりました。

   ![](assets/query_editor_combining_rules.png)

クエリーの要素を変更する場合は、編集アイコンをクリックします。 ルールは、以前に設定したとおりに開き、必要な調整を行うことができます。

クエリーが作成され、定義されました。これにより、配信をよりパーソナライズする訪問者を作成できます。

**関連トピック：**

* [高度な機能](../../automating/using/advanced-expression-editing.md)
* [フィルターの定義](../../developing/using/configuring-filter-definition.md)
* [使用例：週に1回の電子メール配信の作成](../../automating/using/workflow-weekly-offer.md)
* [使用例：場所でセグメント化された配信の作成](../../automating/using/workflow-segmentation-location.md)
* [使用例：補完を含む配信の作成](../../automating/using/workflow-created-query-with-complement.md)
* [使用例：未開封者に新しい配信を送信する再ターゲットワークフロー](../../automating/using/workflow-cross-channel-retargeting.md)
