---
title: ワークフローの実行
description: ワークフローを実行および監視する方法について説明します。
page-status-flag: never-activated
uuid: ff02b74e-53e8-49c6-bf8e-0c729eaa7d25
contentOwner: sauviat
products: SG_CAMPAIGN/STANDARD
audience: automating
content-type: reference
topic-tags: workflow-general-operation
discoiquuid: 906c85ea-83b7-4268-86da-cd353f1dc591
context-tags: workflow,overview;workflow,main
internal: n
snippet: y
translation-type: tm+mt
source-git-commit: aee0e0437cbfe578cb2f715a2433099c79dd1748

---


# ワークフローの実行{#executing-a-workflow}

## ワークフローの実行について {#about-workflow-execution}

ワークフローは、必ず手動で開始します。ただし、開始した後は、スケジューラーアクティビティで指定された情報に応じて非アクティブのままに [なります](../../automating/using/scheduler.md) 。

>[!CAUTION]
>
> ワークフロー実行に優先順位を付け、最大20個の同時ワークフロー実行を実行して、インスタンス全体で最大のパフォーマンスを一貫して達成することをお勧めします。 20を超える同時ワークフロー実行が計画され、デフォルトで順番に実行されます。 チケットをカスタマーケアに送信することで、同時ワークフロー実行の最大数のデフォルト設定を調整できます。

実行関連のアクション（開始、停止、一時停止など）は非同期 **プロセス** です。コマンドは保存され、サーバが適用可能になると有効になります。

ワークフローでは、各アクティビティの結果は、通常、矢印で表されるトランジションを介して次のアクティビティに送信されます。

遷移は、宛先アクティビティにリンクされていない場合、終了されません。

![](assets/wkf_execution_1.png)

>[!NOTE]
>
>未終了の遷移を含むワークフローは、引き続き実行できます。警告メッセージが生成され、ワークフローは移行に到達すると一時停止しますが、エラーは発生しません。 デザインを完全に完了せずにワークフローを開始し、進むにつれてワークフローを完了することもできます。

アクティビティが実行されると、その遷移で送信されたレコードの数がその上に表示されます。

![](assets/wkf_transition_count.png)

ワークフローの実行中または実行後に、トランジションを開いて、送信されたデータが正しいかどうかを確認できます。 データとデータ構造を表示できます。

デフォルトでは、ワークフローの最後の移行の詳細のみにアクセスできます。 前述のアクティビティの結果にアクセスするには、ワークフローを開始する前に、ワークフ **[!UICONTROL Keep interim results]** ロープロパティのセ **[!UICONTROL Execution]** クションのオプションを確認する必要があります。

>[!NOTE]
>
>このオプションは、大量のメモリを消費し、ワークフローを構築し、ワークフローが正しく設定され、動作することを確認するために設計されています。 実稼働インスタンスでは、このチェックボックスをオフのままにします。

トランジションを開いているときは、そのトランジションを編集したり、トラ **[!UICONTROL Label]** ンジションにリン **[!UICONTROL Segment code]** クしたりできます。 これを行うには、対応するフィールドを編集し、変更を確認します。

## REST APIからのワークフローの制御 {#controlling-a-workflow-from-the-rest-api}

REST APIを使用すると、ワークフローを開始 **、一時停止**、再開 **、停止**&#x200B;す **ることがで****** きます。

REST呼び出しの詳細と例については、 [APIドキュメントを参照してください。](../../api/using/controlling-a-workflow.md)

## ライフサイクル {#life-cycle}

ワークフローのライフサイクルには3つの主な手順が含まれ、各手順はステータスと色にリンクされます。

* **編集** （グレー）

   これは、ワークフローの初期設計段階です(「ワークフ [ローの作成](../../automating/using/building-a-workflow.md#creating-a-workflow)」を参照)。 ワークフローはまだサーバーで処理されておらず、リスクを伴わずに変更できます。

* **処理中** （青）

   初期設計段階が完了すると、ワークフローを開始し、サーバーで処理できます。

* **完成** （緑）

   進行中のタスクがなくなった場合、または演算子がインスタンスを明示的に停止した場合は、ワークフローが完了します。

開始したワークフローには、次の2つのステータスがある場合もあります。

* **警告** （黄色）

   ワークフローを完了できなかったか、またはボタンを使用して一時停止し ![](assets/pause_darkgrey-24px.png) ていま ![](assets/check_pause_darkgrey-24px.png) した。

* **エラー** （赤）

   ワークフローの実行中にエラーが発生しました。 ワークフローが停止され、ユーザーがアクションを実行する必要があります。 このエラーの詳細を確認するには、ボタンを使用し ![](assets/printpreview_darkgrey-24px.png) てワークフローログにアクセスします(「監視」を参 [照](#monitoring))。

マーケティングアクティビティのリストを使用すると、すべてのワークフローとそのステータスを表示できます。 詳しくは、「マーケティングアクティビティ [の管理」を参照してくださ](../../start/using/marketing-activities.md#about-marketing-activities)い。

![](assets/wkf_execution_3.png)

## 実行コマンド {#execution-commands}

アクションバーのアイコンを使用して、ワークフローの実行を開始、追跡、および変更できます。 アクショ [ンバーを参照](../../automating/using/workflow-interface.md#action-bar)。

![](assets/wkf_execution_2.png)

利用可能なアクションを次に示します。

**開始**

ボタ ![](assets/play_darkgrey-24px.png) ンはワークフローの実行を開始し、処理中 **** （青）の状態になります。 ワークフローが一時停止された場合は再開され、それ以外の場合は開始され、最初のアクティビティがアクティブ化されます。

>[!NOTE]
>
>開始は非同期プロセスです。リクエストが保存され、ワークフロー実行エンジンによって可能な限り早く処理されます。

**一時停止**

ボタン ![](assets/pause_darkgrey-24px.png) は実行を一時停止します。 ワークフローは、警告 **** （黄色）の状態になります。 再開されるまで、新しいアクティビティはアクティブ化されませんが、進行中の操作は中断されません。

**停止**

このボ ![](assets/stop_darkgrey-24px.png) タンは、実行中のワークフローを停止し、完了（緑色）状態 **にな** ります。 進行中の操作は可能であれば中断され、進行中のインポートまたはSQLクエリは直ちにキャンセルされます。 ワークフローを停止した場所と同じ場所から再開することはできません。

**再起動**

このボタ ![](assets/pauseplay_darkgrey-24px.png) ンには、ワークフローの停止後、再開が含まれます。 ほとんどの場合、これにより、すばやく再起動できます。 また、停止が有効な場合にのみボタンを使用できるので、停止が一定時間かかったら再起動を自動化する ![](assets/play_darkgrey-24px.png) と便利です。

ワークフロー内の1つまたは複数のアクティビティを選択した場合、実行できる他のアクションは次のとおりです。

**即時実行**

このボタ ![](assets/pending_darkgrey-24px.png) ンは、選択された保留中のアクティビティをできるだけ早く開始します。

**通常の実行**

ボタンは、一 ![](assets/check_darkgrey-24px.png) 時停止したアクティビティまたは非アクティブ化したアクティビティを再度アクティブにします。

**実行が中断されました**

このボタン ![](assets/check_pause_darkgrey-24px.png) は、選択したアクティビティでワークフローを一時停止します。このタスクと、その後（同じブランチ内）に続くすべてのタスクは実行されません。

**実行なし**

選択したア ![](assets/checkdisable.png) クティビティを非アクティブにします。

>[!NOTE]
>
>クイックアクションを使用すると、特定のアクティビティに関する様々なアクションにアクセスし、アクティビティが選択されたときに表示されます。

## 監視 {#monitoring}

このアイコ ![](assets/printpreview_darkgrey-24px.png) ンをクリックすると、ワークフローログとタスクメニューが開きます。

ワークフローの履歴は、ワークフローの実行オプションで指定された期間だけ保存されます( [Workflowプロパティを参照](#workflow-properties))。 この間、再起動後も、すべてのメッセージが保存されます。 以前の実行のメッセージを保存しない場合は、ボタンをクリックして履歴をクリアする必要があり ![](assets/delete_darkgrey-24px.png) ます。

このタ **[!UICONTROL Log]** ブには、すべてのアクティビティまたは選択したアクティビティの実行履歴が含まれます。 実行された操作と実行エラーを時系列順にインデックスします。

![](assets/wkf_execution_4.png)

タブで **[!UICONTROL Tasks]** は、アクティビティの実行順序が詳細に示されます。 詳細を表示するには、タスクをクリックします。

![](assets/wkf_execution_5.png)

次の2つのリストで、

* 適用したフィルターに従ったアクティビティの合計数を表示するには、カウンターをクリックします。 リスト内の要素数が30未満の場合は、デフォルトでカウンターが表示されます。
* このボ **[!UICONTROL Configure list]** タンを使用すると、表示する情報の選択、列の順序の定義、およびリストの並べ替えを行うことができます。
* フィルターを使用すると、必要な情報をすばやく見つけることができます。 検索フィールドを使用して、ワークフローアクティビティ名の特定のテキストを検索します(例："query")とログを参照してください。

## エラー管理 {#error-management}

エラーが発生すると、ワークフローが一時停止され、エラーが発生したときに実行されていたアクティビティが赤く点滅します。

ワークフローのステータスが赤に変わり、エラーがログに記録されます。

ワークフローを設定して、一時停止せず、エラーなく実行を続けることができます。 これを行うには、ボタンを使用してワークフローのプロパティに移動し、セクションで ![](assets/edit_darkgrey-24px.png) 「エラーの場合 **[!UICONTROL Execution]** 」フィールドの「無視 **」オプションを選択します****** 。

この場合、エラーのあるタスクは中止されます。 このモードは、後で操作を再試行する（定期的なアクション）ように設計されたワークフローに特に適しています。

>[!NOTE]
>
>この設定は、各アクティビティに個別に適用できます。これを行うには、アクティビティを選択し、クイックアクションを使用して開きま ![](assets/edit_darkgrey-24px.png)す。 次に、「実行オプション」タブでエラー管理モ **ードを選択し** ます。 アクティビティ [実行オプションを参照してくださ](#activity-execution-options)い。

また、ワ **[!UICONTROL Execution]** ークフローのプロパティのセクションでは、ワークフローの実行が自動的に中断さ **[!UICONTROL Consecutive errors]** れる前に許可される多数の権限を定義することもできます。 この数に達しない限り、エラーのある要素は無視され、他のワークフローブランチは通常どおり実行されます。 この数に達すると、ワークフローが中断され、ワークフローの管理者に自動的に通知されます（電子メールおよびアプリ内通知）。 ワークフ [ローのプロパティ](#workflow-properties) 、 [Adobe Campaign通知を参照してください](../../administration/using/sending-internal-notifications.md)。

また、スーパーバイザは、ワークフローの実行プロパティで定義することもできます。

## ワークフローのプロパティ {#workflow-properties}

ワークフローの実行オプションを変更するには、ボタンを使用し ![](assets/edit_darkgrey-24px.png) てワークフローのプロパティにアクセスし、セクションを選択 **[!UICONTROL Execution]** します。

このフ **[!UICONTROL Default affinity]** ィールドを使用すると、特定のマシン上でワークフローまたはワークフローアクティビティを強制的に実行できます。

このフィー **[!UICONTROL History in days]** ルドで、履歴を削除する必要がある期間を指定します。

必要に応じて、とのオプションをチ **[!UICONTROL Save SQL queries in the log]** ェックす **[!UICONTROL Execute in the engine (do not use in production)]** ることができます。

遷移の詳 **[!UICONTROL Keep interim results]** 細を表示する場合は、このオプションを選択します。 警告：このオプションを選択すると、ワークフローの実行が大幅に遅くなる可能性があります。

このフ **[!UICONTROL Severity]** ィールドでは、Adobe Campaignインスタンスでワークフローを実行する際の優先順位を指定できます。 重要なワークフローが最初に実行されます。

このフ **[!UICONTROL Supervisors]** ィールドでは、ワークフローでエラーが発生した場合に通知するユーザーのグループ（電子メールおよびアプリ内通知）を定義できます。 グループが定義されていない場合、誰も通知されません。 Adobe Campaign通知について詳しくは、 [Adobe Campaign通知を参照してください](../../administration/using/sending-internal-notifications.md)。

このフ **[!UICONTROL In case of error]** ィールドでは、アクティビティでエラーが発生した場合に実行するアクションを指定できます。 これには、次の2つのオプションがあります。

* **プロセスの中断**:ワークフローは自動的に中断されます。 次に、ワークフローのステータスが「エ **ラー** 」になり、関連付けられた色が赤に変わります。 問題が解決したら、ワークフローを再起動します。
* **無視**:アクティビティは実行されず、その後に続く（同じブランチ内の）アクティビティも実行されません。 これは、定期的なタスクに役立つ場合があります。 ブランチにスケジューラがアップストリームに配置されている場合は、次の実行日にこのトリガーがトリガーされます。

   このオプションを選択すると、次の権限を持つ複数のユーザーを定 **[!UICONTROL Consecutive errors]** 義することもできます。

   * 指定した数がである場合、ま **[!UICONTROL 0]**&#x200B;たは指定した数に達しない限り、エラーが発生したアクティビティは無視されます。 他のワークフローブランチは、通常どおり実行されます。
   * 指定された数に達すると、ワークフロー全体が中断され、になりま **[!UICONTROL Erroneous]**&#x200B;す。 スーパーバイザーが定義されている場合は、電子メールで自動的に通知されます。

![](assets/wkf_execution_6.png)

## アクティビティのプロパティ {#activity-properties}

### アクティビティの一般プロパティ {#general-properties-of-an-activity}

各アクティビティにはタブがあ **[!UICONTROL Properties]** ります。 このタブでは、アクティビティの一般的なパラメーター（特にラベルとID）を変更できます。 このタブの設定はオプションです。

### アクティビティのアウトバウンド遷移の管理 {#managing-an-activity-s-outbound-transitions}

デフォルトでは、一部のアクティビティにはアウトバウンドトランジションがありません。 同じワークフロー内の訪問者に対し **[!UICONTROL Transitions]** て他のプロセスを適用するには、タ **[!UICONTROL Properties]** ブまたはアクティビティのタブから1つを追加します。

アクティビティに応じて、次の複数のタイプのアウトバウンド遷移を追加できます。

* 標準的な移行：活動によって計算された人口
* 母集団なしの移行：このタイプのアウトバウンド移行は、ワークフローを続行するために追加でき、システム上の不要な領域を消費しない母集団を含まないことができます。
* 拒否：拒否された母集団 例えば、アクティビティの受信データが正しくないか不完全であったために処理できなかった場合などです。
* 補数：アクティビティの実行後に残っている母集団。 例えば、セグメント化アクティビティが、受信訪問者の割合のみを保存するように設定されている場合、

該当する場合は、アクティビティ **[!UICONTROL Segment code]** のアウトバウンド遷移のを指定します。 このセグメントコードを使用すると、ターゲット母集団のサブセットがどこから来ているかを識別でき、後でメッセージパーソナライゼーションの目的で機能する場合があります。

### アクティビティの実行オプション {#activity-execution-options}

アクティビティのプロパティ画面には、アクティビティの実行 **[!UICONTROL Advanced options]** モードとエラー発生時の動作を定義できるタブがあります。

これらのオプションにアクセスするには、ワークフローでアクティビティを選択し、アクションバーのボ ![](assets/edit_darkgrey-24px.png) タンを使用して開きます。

![](assets/wkf_advanced_parameters.png)

このフ **[!UICONTROL Execution]** ィールドでは、タスクの開始時に実行するアクションを定義できます。 これには3つのオプションがあります。

* **標準**:アクティビティは通常どおり実行されます。
* **有効にするが実行しない**:アクティビティは一時停止され、その結果、後に続くすべてのプロセスも同様です。 これは、タスクの開始時に表示する場合に役立ちます。
* **有効にしない**:アクティビティは実行されず、その結果、（同じブランチ内の）後続のすべてのアクティビティも実行されません。

このフ **[!UICONTROL In case of error]** ィールドでは、アクティビティでエラーが発生した場合に実行するアクションを指定できます。 これには、次の2つのオプションがあります。

* **プロセスの中断**:ワークフローは自動的に中断されます。 次に、ワークフローのステータスが「エ **ラー** 」になり、関連付けられた色が赤に変わります。 問題が解決したら、ワークフローを再起動します。
* **無視**:アクティビティは実行されず、その後に続く（同じブランチ内の）アクティビティも実行されません。 これは、定期的なタスクに役立つ場合があります。 ブランチにスケジューラがアップストリームに配置されている場合は、次の実行日にこのトリガーがトリガーされます。

このフ **[!UICONTROL Behavior]** ィールドでは、非同期タスクを使用する場合に実行する手順を定義できます。 これには、次の2つのオプションがあります。

* **複数のタスクが許可されました**:最初のタスクが完了していない場合でも、複数のタスクを同時に実行できます。
* **現在のタスクの優先度**:タスクが進行中の場合は、これが優先されます。 1つのタスクが進行中の限り、他のタスクは実行されません。

このフ **[!UICONTROL Max. execution duration]** ィールドでは、「30秒」や「1h」などの期間を指定できます。 指定した期間の経過後にアクティビティが完了しない場合は、アラートがトリガーされます。 これは、ワークフローの機能には影響しません。

このフ **[!UICONTROL Affinity]** ィールドを使用すると、特定のマシン上でワークフローまたはワークフローアクティビティを強制的に実行できます。 これを行うには、対象のワークフローまたはアクティビティの1つまたは複数の親和性を指定する必要があります。

このフ **[!UICONTROL Time zone]** ィールドでは、アクティビティのタイムゾーンを選択できます。 Adobe Campaignでは、同じインスタンスで複数の国の時間差を管理できます。 適用される設定は、インスタンスの作成時に設定されます。

The **Comment** field is a free field that allows you to add a note.
