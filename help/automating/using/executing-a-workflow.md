---
title: ワークフローの実行
description: ワークフローの実行と監視の方法を説明します。
page-status-flag: never-activated
uuid: ff02b74e-53e8-49c6-bf8e-0c729eaa7d25
contentOwner: sauviat
products: SG_CAMPAIGN/STANDARD
audience: automating
content-type: reference
topic-tags: workflow-general-operation
discoiquuid: 906c85ea-83b7-4268-86da-cd353f1dc591
context-tags: workflow,overview;workflow,main
internal: n
snippet: y
translation-type: tm+mt
source-git-commit: e8302a8d3ba914781bd332bc318b65d88afc6d94

---


# ワークフローの実行{#executing-a-workflow}

## ワークフローの実行について {#about-workflow-execution}

ワークフローは、必ず手動で開始します。ただし、開始した後は、スケジューラーアクティビティで指定された情報に応じて、非アクティブのままに [なります](../../automating/using/scheduler.md) 。

>[!CAUTION]
>
> お客様は、ワークフロー実行に優先順位を付け、最大20個の同時ワークフロー実行を実行して、インスタンス全体で最大のパフォーマンスを維持することをお勧めします。 20を超える同時ワークフロー実行が計画され、デフォルトで連続して実行されます。 チケットをカスタマーケアに送信することで、同時ワークフロー実行の最大数のデフォルト設定を調整できます。

実行関連のアクション（開始、停止、一時停止など）は非同 **期プロセス** :コマンドが保存され、サーバーが適用可能になると有効になります。

ワークフローでは、各アクティビティの結果は、通常、矢印で表されるトランジションを介して次のアクティビティに送信されます。

遷移は、宛先アクティビティにリンクされていない場合、終了されません。

![](assets/wkf_execution_1.png)

>[!NOTE]
>
>終了していない遷移を含むワークフローは、引き続き実行できます。警告メッセージが生成され、ワークフローは移行に到達すると一時停止しますが、エラーは発生しません。 また、デザインを完全に完了せずにワークフローを開始し、作業を進めながらワークフローを完了することもできます。

アクティビティが実行されると、その上に、トランジションで送信されたレコードの数が表示されます。

![](assets/wkf_transition_count.png)

ワークフローの実行中または実行後に、送信されたデータが正しいかどうかを確認するために、トランジションを開くことができます。 データとデータ構造を表示できます。

デフォルトでは、ワークフローの最後の移行の詳細のみにアクセスできます。 前述のアクティビティの結果にアクセスするには、ワークフローを開始する前に、ワークフ **[!UICONTROL Keep interim results]** ロープロパティのセ **[!UICONTROL Execution]** クションのオプションを確認する必要があります。

>[!NOTE]
>
>このオプションは、大量のメモリを消費し、ワークフローの構築と、ワークフローの正しい設定と動作の確保に役立つように設計されています。 実稼働インスタンスでは、このチェックボックスをオフのままにします。

トランジションが開いている場合は、そのトランジションを編集したり、ト **[!UICONTROL Label]** ランジションにリンクしたり **[!UICONTROL Segment code]** することができます。 これを行うには、対応するフィールドを編集し、変更を確認します。

キャンペーン標準REST APIを使用して、ワークフ **ローの開始**、一時停 **止**、再開 **、停止お****** よび停止を行えます。 REST呼び出しの詳細と例については、 [APIドキュメントを参照してください。](../../api/using/controlling-a-workflow.md)

## ライフサイクル {#life-cycle}

ワークフローのライフサイクルには3つの主な手順が含まれ、各手順はステータスと色にリンクされます。

* **編集** （グレー）

   これは、ワークフローの初期設計段階です(「ワークフローの [作成」を参照](../../automating/using/building-a-workflow.md#creating-a-workflow))。 ワークフローはまだサーバーで処理されておらず、リスクを伴わずに変更できます。

* **処理中** （青）

   最初の設計段階が完了すると、ワークフローを開始し、サーバーで処理できます。

* **完了** （緑）

   進行中のタスクがなくなった場合、または演算子がインスタンスを明示的に停止した場合、ワークフローが完了します。

開始すると、ワークフローには他に2つのステータスが含まれる場合があります。

* **警告** （黄色）

   ワークフローを完了できなかったか、またはボタンを使用して一時停止 ![](assets/pause_darkgrey-24px.png) されて ![](assets/check_pause_darkgrey-24px.png) いました。

* **エラー** （赤）

   ワークフローの実行中にエラーが発生しました。 ワークフローが停止され、ユーザーはアクションを実行する必要があります。 このエラーの詳細を確認するには、ボタンを使用し ![](assets/printpreview_darkgrey-24px.png) てワークフローログにアクセスします(「監視」を参照 [してください](#monitoring))。

マーケティングアクティビティのリストを使用すると、すべてのワークフローとステータスを表示できます。 詳しくは、「マーケティングアクティビティの管 [理」を参照してくださ](../../start/using/marketing-activities.md#about-marketing-activities)い。

![](assets/wkf_execution_3.png)

## 実行コマンド {#execution-commands}

アクションバーのアイコンを使用すると、ワークフローの実行を開始、追跡、および変更できます。 アクショ [ンバーを参照](../../automating/using/workflow-interface.md#action-bar)。

![](assets/wkf_execution_2.png)

利用可能なアクションを次に示します。

**開始**

ボタ ![](assets/play_darkgrey-24px.png) ンはワークフローの実行を開始し、その後、進行中( **青)のステータス** になります。 ワークフローが一時停止された場合は再開され、それ以外の場合は開始され、最初のアクティビティがアクティブ化されます。

>[!NOTE]
>
>開始は非同期プロセスです。リクエストが保存され、ワークフローの実行エンジンで可能な限り早く処理されます。

**一時停止**

ボタン ![](assets/pause_darkgrey-24px.png) を押すと実行が一時停止します。 ワークフローは、警告 **** （黄色）のステータスになります。 再開されるまで、新しいアクティビティはアクティブ化されませんが、進行中の操作は中断されません。

**停止**

このボ ![](assets/stop_darkgrey-24px.png) タンは、実行中のワークフローを停止し、完了（緑色）のステ **ータスに** なります。 処理中の操作は可能な限り中断され、進行中のインポートまたはSQLクエリは直ちに取り消されます。 ワークフローを停止した場所と同じ場所から再開することはできません。

**再起動**

このボタ ![](assets/pauseplay_darkgrey-24px.png) ンは、ワークフローを停止してから再開する操作です。 ほとんどの場合、これにより、より迅速に再起動できます。 また、停止が有効な場合にのみボタンを使用できるので、停止が一定時間かかったら再起動を自動化する ![](assets/play_darkgrey-24px.png) と便利です。

ワークフロー内の1つまたは複数のアクティビティを選択すると、次のような他のアクションを実行できます。

**即時実行**

このボタ ![](assets/pending_darkgrey-24px.png) ンは、選択された保留中のアクティビティをできるだけ早く開始します。

**通常の実行**

ボタンは、一 ![](assets/check_darkgrey-24px.png) 時停止または非アクティブ化されたアクティビティを再度アクティブにします。

**実行が中断されました**

このボタン ![](assets/check_pause_darkgrey-24px.png) は、選択したアクティビティでワークフローを一時停止します。このタスクと（同じブランチで）その後に続くすべてのタスクは実行されません。

**実行なし**

選択したア ![](assets/checkdisable.png) クティビティを非アクティブにします。

>[!NOTE]
>
>クイックアクションを使用すると、特定のアクティビティに関する様々なアクションにアクセスし、アクティビティが選択されたときに表示されます。

## 監視 {#monitoring}

このアイコ ![](assets/printpreview_darkgrey-24px.png) ンをクリックすると、ワークフローログとタスクメニューが開きます。

ワークフローの履歴は、ワークフローの実行オプションで指定された期間( [Workflowプロパティを参照](#workflow-properties))保存されます。 この間、再起動後も、すべてのメッセージが保存されます。 以前の実行のメッセージを保存しない場合は、ボタンをクリックして履歴を削除する必要があり ![](assets/delete_darkgrey-24px.png) ます。

このタ **[!UICONTROL Log]** ブには、すべてのアクティビティまたは選択したアクティビティの実行履歴が含まれます。 実行された操作と実行エラーを時系列順にインデックス化します。

![](assets/wkf_execution_4.png)

タブで **[!UICONTROL Tasks]** は、アクティビティの実行順序の詳細が表示されます。 詳細を表示するには、タスクをクリックします。

![](assets/wkf_execution_5.png)

次の2つのリストで、

* 適用したフィルターに従ったアクティビティの合計数を表示するには、カウンターをクリックします。 リスト内の要素数が30未満の場合、デフォルトでカウンターが表示されます。
* ボタ **[!UICONTROL Configure list]** ンを使用すると、表示する情報の選択、列の順序の定義、リストの並べ替えを行うことができます。
* フィルターを使用すると、必要な情報をすばやく見つけることができます。 検索フィールドを使用して、ワークフローアクティビティ名の特定のテキストを検索します(例：&quot;query&quot;)とログを参照してください。

## エラー管理 {#error-management}

エラーが発生すると、ワークフローが一時停止され、エラーが発生したときに実行されていたアクティビティが赤く点滅します。

ワークフローのステータスが赤くなり、エラーがログに記録されます。

ワークフローを設定して、一時停止せず、エラーなしで実行を続行できます。 これを行うには、ボタンを使用してワークフローのプロパティに移動し、 ![](assets/edit_darkgrey-24px.png) セクションの「エラ **[!UICONTROL Execution]** ーの場合は無視 **** 」フィールドで「無視 **」オプションを選択します** 。

この場合、エラーのあるタスクは中止されます。 このモードは、後で操作を再試行する（定期的なアクション）ように設計されたワークフローに特に適しています。

>[!NOTE]
>
>この設定は、各アクティビティに個別に適用できます。これを行うには、アクティビティを選択し、クイックアクションを使用して開きま ![](assets/edit_darkgrey-24px.png)す。 次に、「実行オプション」タブでエラー管理モ **ードを選択し** ます。 アクティビテ [ィの実行オプションを参照してくださ](#activity-execution-options)い。

ワークフロー [のプロパティでは](#workflow-properties)、エラー管理に関連する追加のオプションを使用できます。

![](assets/wkf_execution_error.png)

次のオプションを選択できます。

* **[!UICONTROL Supervisors]**:ワークフローでエラーが発生した場合に通知する人のグループ（電子メールおよびアプリ内通知）を定義できます。 グループが定義されていない場合、誰も通知されません。 Adobe Campaign通知について詳しくは、 [Adobe Campaign通知を参照してください](../../administration/using/sending-internal-notifications.md)。

* **[!UICONTROL In case of error]**:アクティビティでエラーが発生した場合に実行するアクションを指定できます。 これには、次の2つのオプションがあります。

   * **プロセスの中断**:ワークフローは自動的に中断されます。 ワークフローのステータスが「エラー **あり** 」になり、関連付けられた色が赤に変わります。 問題が解決したら、ワークフローを再開します。
   * **無視**:アクティビティは実行されず、その結果、（同じブランチ内の）アクティビティの後に続くアクティビティも実行されません。 これは、定期的なタスクに役立つ場合があります。 ブランチにスケジューラーがアップストリームに配置されている場合、これは次の実行日にトリガーされます。

* **[!UICONTROL Consecutive errors]** :ワークフローの実行が自動的に中断される前に、承認された連続する多数のエラーを定義できます。

   * 指定した数がの場合、ま **[!UICONTROL 0]**&#x200B;たは指定した数に達しない限り、エラーが発生したアクティビティは無視されます。 他のワークフローブランチは、通常どおり実行されます。

   * 指定した数に達すると、ワークフロー全体が中断され、になりま **[!UICONTROL Erroneous]**&#x200B;す。 スーパーバイザが定義されている場合は、電子メールで自動的に通知されます。 詳しくは、 [Adobe Campaign通知を参照してください](../../administration/using/sending-internal-notifications.md)。

## ワークフローのプロパティ {#workflow-properties}

ワークフローの実行オプションを変更するには、ボタンを使用し ![](assets/edit_darkgrey-24px.png) てワークフローのプロパティにアクセスし、セクションを選択 **[!UICONTROL Execution]** します。

![](assets/wkf_execution_6.png)

次のオプションを選択できます。

* **[!UICONTROL Default affinity]**:このフィールドを使用すると、特定のマシン上でワークフローまたはワークフローアクティビティを強制的に実行できます。

* **[!UICONTROL History in days]**:履歴を削除する必要が生じた日数を指定します。 履歴は、ログ、タスク、イベントなど、関連するすべての要素で構成されます。 デフォルト値は、標準搭載のワークフローテンプレートの30日です。

   履歴の削除は、データベースクリーンアップのテクニカルワークフローによって実行され、デフォルトで毎日実行されます(技術 [ワークフローのリスト](../../administration/using/technical-workflows.md)を参照)。

   >[!IMPORTANT]
   >
   >このフィ **[!UICONTROL History in days]** ールドを空白のままにすると、その値は「1」と見なされ、1日後に履歴が削除されます。

* **[!UICONTROL Save SQL queries in the log]**:ワークフローのSQLクエリをログに保存できます。

* ***[!UICONTROL Keep interim results]**:トランジションの詳細を表示する場合は、このオプションを選択します。 警告：このオプションをチェックすると、ワークフローの実行が大幅に遅くなる可能性があります。

* **[!UICONTROL Execute in the engine (do not use in production)]**:開発環境のテスト用に、ワークフローをローカルで実行できます。

* **[!UICONTROL Severity]**:を使用すると、Adobe Campaignインスタンスでワークフローを実行する際の優先順位を指定できます。 重要なワークフローが最初に実行されます。

このセク **[!UICONTROL Error management]** ションには、エラーが発生した場合のワークフローの動作を管理するための追加のオプションが用意されています。 これらのオプションの詳細は、「エラー管理 [」の節に](#error-management) 記載されます。

## アクティビティのプロパティ {#activity-properties}

### アクティビティの一般プロパティ {#general-properties-of-an-activity}

各アクティビティにはタブが **[!UICONTROL Properties]** あります。 このタブでは、アクティビティの一般的なパラメーター（特にラベルとID）を変更できます。 このタブの設定はオプションです。

### アクティビティのアウトバウンド遷移の管理 {#managing-an-activity-s-outbound-transitions}

デフォルトでは、一部のアクティビティにはアウトバウンドトランジションがありません。 同じワークフロー内の訪問者 **[!UICONTROL Transitions]** に対して、タブまたはアクティビティのタ **[!UICONTROL Properties]** ブから1つを追加し、他のプロセスを適用することができます。

アクティビティに応じて、次の複数のタイプのアウトバウンド遷移を追加できます。

* 標準の移行：活動によって計算された母集団
* 母集団なしの移行：このタイプのアウトバウンドトランジションは、ワークフローを続行するために追加でき、システム上の不要な領域を消費しない母集団を含まないようにすることができます。
* 拒否：母集団が拒否されました。 例えば、アクティビティの受信データが正しくないか不完全であったために処理できなかった場合などです。
* 補数：アクティビティの実行後に残る母集団。 例えば、インバウンド母集団の割合のみを保存するようにセグメント化アクティビティが設定されている場合、

該当する場合は、アクティビティ **[!UICONTROL Segment code]** のアウトバウンド遷移のを指定します。 このセグメントコードを使用すると、ターゲット母集団のサブセットがどこから来たかを識別し、後でメッセージのパーソナライゼーションの目的で機能する場合があります。

### アクティビティの実行オプション {#activity-execution-options}

アクティビティのプロパティ画面には、アクティビティの実 **[!UICONTROL Advanced options]** 行モードと、エラーが発生した場合の動作を定義できるタブがあります。

これらのオプションにアクセスするには、ワークフローでアクティビティを選択し、アクションバーのボ ![](assets/edit_darkgrey-24px.png) タンを使用して開きます。

![](assets/wkf_advanced_parameters.png)

The **[!UICONTROL Execution]** field allows you to define the action to be carried out when the task is started. これには、次の3つのオプションがあります。

* **標準**:アクティビティは通常どおり実行されます。
* **有効にするが実行しない**:アクティビティは一時停止され、その結果、後に続くすべてのプロセスも同様です。 これは、タスクの開始時に表示したい場合に役立ちます。
* **有効にしない**:アクティビティは実行されず、その結果、（同じブランチ内の）後に続くすべてのアクティビティも実行されません。

このフ **[!UICONTROL In case of error]** ィールドでは、アクティビティでエラーが発生した場合に実行するアクションを指定できます。 これには、次の2つのオプションがあります。

* **プロセスの中断**:ワークフローは自動的に中断されます。 ワークフローのステータスが「エラー **あり** 」になり、関連付けられた色が赤に変わります。 問題が解決したら、ワークフローを再開します。
* **無視**:アクティビティは実行されず、その結果、（同じブランチ内の）アクティビティの後に続くアクティビティも実行されません。 これは、定期的なタスクに役立つ場合があります。 ブランチにスケジューラーがアップストリームに配置されている場合、これは次の実行日にトリガーされます。

このフ **[!UICONTROL Behavior]** ィールドでは、非同期タスクを使用する場合に実行する手順を定義できます。 これには、次の2つのオプションがあります。

* **複数のタスクが認証されました**:最初のタスクが完了していない場合でも、複数のタスクを同時に実行できます。
* **現在のタスクの優先度**:タスクが進行中の場合は、これが優先されます。 1つのタスクがまだ進行中である限り、他のタスクは実行されません。

このフ **[!UICONTROL Max. execution duration]** ィールドでは、「30秒」や「1時間」などの期間を指定できます。 指定した期間の経過後にアクティビティが完了しない場合は、アラートがトリガーされます。 これは、ワークフローの機能には影響しません。

このフ **[!UICONTROL Affinity]** ィールドを使用すると、特定のマシン上でワークフローまたはワークフローアクティビティを強制的に実行できます。 これを行うには、対象のワークフローまたはアクティビティの1つまたは複数の親和性を指定する必要があります。

このフ **[!UICONTROL Time zone]** ィールドでは、アクティビティのタイムゾーンを選択できます。 Adobe Campaignでは、同じインスタンスの複数の国の時間差を管理できます。 適用される設定は、インスタンスの作成時に設定されます。

>[!NOTE]
>
>デフォルトでは、タイムゾーンが選択されていない場合、アクティビティはワークフローのプロパティで定義されたタイムゾーンを使用します。

The **Comment** field is a free field that allows you to add a note.
