---
title: ワークフローの実行
description: ワークフローの実行と監視の方法を説明します。
page-status-flag: never-activated
uuid: ff02b74e-53e8-49c6-bf8e-0c729eaa7d25
contentOwner: sauviat
products: SG_CAMPAIGN/STANDARD
audience: automating
content-type: reference
topic-tags: workflow-general-operation
discoiquuid: 906c85ea-83b7-4268-86da-cd353f1dc591
context-tags: workflow,overview;workflow,main
internal: n
snippet: y
translation-type: tm+mt
source-git-commit: e5c21e1398d5fbe39761ab00ada24263317e6742

---


# ワークフローの実行{#executing-a-workflow}

## ワークフローの実行について {#about-workflow-execution}

ワークフローは、必ず手動で開始します。ただし、一度起動すると、 [スケジューラーで指定した情報に応じて非アクティブのままにな](../../automating/using/scheduler.md) り、

>[!CAUTION]
>
> お客様は、ワークフロー実行に優先順位を付け、最大20個の同時ワークフロー実行を実行して、インスタンス全体で最大のパフォーマンスを維持することをお勧めします。 20を超える同時ワークフロー実行が計画され、デフォルトで連続して実行されます。 チケットをカスタマーケアに送信することで、同時ワークフロー実行の最大数のデフォルト設定を調整できます。

実行関連のアクション(開始、停止、一時停止など)は非同 **期プロセス** :コマンドが保存され、サーバーが適用可能になると有効になります。

ワークフローでは、各アクティビティの結果は、通常、矢印で表されるトランジションを介して次のアクティビティに送信されます。

トランジションは、リンク先のリンクがない場合、終了されません。アクティビティ

![](assets/wkf_execution_1.png)

>[!NOTE]
>
>未終了のワークフローを含むトランジションは、引き続き実行できます。警告メッセージが生成され、ワークフローがトランジションに到達するとワークフローが一時停止しますが、エラーは発生しません。 また、デザインを完全に開始しなくてもワークフローを完了でき、作業を進めながらワークフローを完了できます。

アクティビティの実行後は、そのレコードの上に送信されたトランジションのレコード数が表示されます。

![](assets/wkf_transition_count.png)

ワークフローを開き、トランジションの実行中または実行後に、送信されたデータが正しいかどうかを確認できます。 データと表示構造を構成できます。

デフォルトでは、ワークフローの最後のトランジションの詳細のみにアクセスできます。 前述のアクティビティの結果にアクセスするには、ワークフローを開始する前に、ワークフ **[!UICONTROL Keep interim results]** ロープロパティのセ **[!UICONTROL Execution]** クションのオプションを確認する必要があります。

>[!NOTE]
>
>このオプションは、大量のメモリを消費し、ワークフローの構築と、ワークフローの正しい設定と動作の確保に役立つように設計されています。 実稼働インスタンスでは、このチェックボックスをオフのままにします。

トランジションを開いたときに、そのアイテムを編集したり、 **[!UICONTROL Label]** そのアイテムにリンクし **[!UICONTROL Segment code]** たりできます。 これを行うには、対応するフィールドを編集し、変更を確認します。

Campaign StandardREST APIを使用して、ワークフ **ローの開始**、一時停 **止**、再開、停止 **を行う****** ことができます。 REST呼び出しの詳細と例については、 [APIドキュメントを参照してください。](../../api/using/controlling-a-workflow.md)

## ライフサイクル {#life-cycle}

ワークフローのライフサイクルには3つの主な手順が含まれ、各手順はステータスと色にリンクされます。

* **編集** （グレー）

   これは、ワークフローの初期設計段階です(「ワークフローの [作成」を参照](../../automating/using/building-a-workflow.md#creating-a-workflow))。 ワークフローはまだサーバーで処理されておらず、リスクを伴わずに変更できます。

* **処理中** （青）

   最初の設計段階が完了すると、ワークフローを開始し、サーバーで処理できます。

* **完了** （緑）

   進行中のタスクがなくなった場合、または演算子がインスタンスを明示的に停止した場合、ワークフローが完了します。

開始すると、ワークフローには他に2つのステータスが含まれる場合があります。

* **警告** （黄色）

   ワークフローを完了できなかったか、またはボタンを使用して一時停止 ![](assets/pause_darkgrey-24px.png) されて ![](assets/check_pause_darkgrey-24px.png) いました。

* **エラー** （赤）

   ワークフローの実行中にエラーが発生しました。 ワークフローが停止され、ユーザーはアクションを実行する必要があります。 このエラーの詳細を確認するには、ボタンを使用し ![](assets/printpreview_darkgrey-24px.png) てワークフローログにアクセスします(「監視」を参照 [してください](#monitoring))。

マーケティングアクティビティのリストを使用すると、すべてのワークフローとステータスを表示できます。 詳しくは、「マーケティングアクティビティの管理」を [参照してくださ](../../start/using/marketing-activities.md#about-marketing-activities)い。

![](assets/wkf_execution_3.png)

## 実行コマンド {#execution-commands}

アクションバーのアイコンを使用すると、開始の実行の選択、追跡、変更を行うことができます。 アクショ [ンバーを参照](../../automating/using/workflow-interface.md#action-bar)。

![](assets/wkf_execution_2.png)

利用可能なアクションを次に示します。

**開始**

ワークフ ![](assets/play_darkgrey-24px.png) ローを実行するボタン開始です。このボタンは、 **処理中** （青色）のステータスを取ります。 ワークフローが一時停止された場合は再開され、それ以外の場合は開始され、最初のアクティビティがアクティブになります。

>[!NOTE]
>
>開始は非同期プロセスです。リクエストが保存され、ワークフローの実行エンジンで可能な限り早く処理されます。

**一時停止**

ボタン ![](assets/pause_darkgrey-24px.png) を押すと実行が一時停止します。 ワークフローは、警告 **** （黄色）のステータスになります。 新しいアクティビティは、再開されるまでアクティブ化されませんが、進行中の操作は中断されません。

**停止**

このボ ![](assets/stop_darkgrey-24px.png) タンは、実行中のワークフローを停止し、完了（緑色）のステ **ータスに** なります。 処理中の操作は可能な限り中断され、インポートまたは進行中のSQLクエリは直ちに取り消されます。 ワークフローを停止した場所と同じ場所から再開することはできません。

**再起動**

このボタ ![](assets/pauseplay_darkgrey-24px.png) ンは、ワークフローを停止してから再開する操作です。 ほとんどの場合、これにより、より迅速に再起動できます。 また、停止が有効な場合にのみボタンを使用できるので、停止が一定時間かかったら再起動を自動化する ![](assets/play_darkgrey-24px.png) と便利です。

ワークフロー内の1つまたは複数のアクティビティを選択すると、次のような他のアクションを実行できます。

**即時実行**

このボタ ![](assets/pending_darkgrey-24px.png) ンでは、開始中の任意のアクティビティが可能な限り早く選択されます。

**通常の実行**

ボタンは、一時 ![](assets/check_darkgrey-24px.png) 停止したアクティビティまたは非アクティブ化したイベント

**実行が中断されました**

このボタ ![](assets/check_pause_darkgrey-24px.png) ンをクリックすると、選択したワークフローがアクティビティされます。このタスクと（同じブランチ内の）その後のすべてのイベントは実行されません。

**実行なし**

このボタンをク ![](assets/checkdisable.png) リックすると、選択したアクティビティが非アクティブになります。

>[!NOTE]
>
>クイックアクションを使用すると、特定のアクションに関する様々なアクティビティにアクセスし、アクティビティを選択したときに表示されます。

## 監視 {#monitoring}

このアイコ ![](assets/printpreview_darkgrey-24px.png) ンをクリックすると、ワークフローログとタスクメニューが開きます。

ワークフローの履歴は、ワークフローの実行オプションで指定された期間( [Workflowプロパティを参照](#workflow-properties))保存されます。 この間、再起動後も、すべてのメッセージが保存されます。 以前の実行のメッセージを保存しない場合は、ボタンをクリックして履歴を削除する必要があり ![](assets/delete_darkgrey-24px.png) ます。

このタ **[!UICONTROL Log]** ブには、すべてのアクティビティまたは選択したアクティビティの実行履歴が含まれます。 実行された操作と実行エラーを時系列順にインデックス化します。

![](assets/wkf_execution_4.png)

タブで **[!UICONTROL Tasks]** は、実行順序の詳細をアクティビティします。 詳細を表示するには、タスクをクリックしてください。

![](assets/wkf_execution_5.png)

次の2つのリスト:

* 適用したフィルターに従ったアクティビティの合計数を表示するには、カウンターをクリックします。 デフォルトでは、要素の数が30未満の場合、リストが表示されます。
* このボ **[!UICONTROL Configure list]** タンを使用すると、表示する情報の選択、列の順序の定義、およびリストの並べ替えが可能です。
* 必要な情報は、フィルターを使用してすばやく見つけることができます。 検索フィールドを使用して、ワークフローアクティビティ名の特定のテキストを検索します(例：「クエリ」)とログ。

## エラー管理 {#error-management}

エラーが発生すると、ワークフローが一時停止され、エラーが発生したときに実行されていたアクティビティが赤く点滅します。

ワークフローのステータスが赤くなり、エラーがログに記録されます。

ワークフローを設定して、一時停止せず、エラーなしで実行を続行できます。 これを行うには、ボタンを使用してワークフローのプロパティに移動し、 ![](assets/edit_darkgrey-24px.png) セクションの「エラ **[!UICONTROL Execution]** ーの場合は無視 **** 」フィールドで「無視 **」オプションを選択します** 。

この場合、エラーのあるタスクは中止されます。 このモードは、後で操作を再試行するワークフロー（定期的なアクション）に特に適しています。

>[!NOTE]
>
>この設定は、各アクティビティに個別に適用できます。これを行うには、アクティビティを選択し、クイックアクションを使用して開きま ![](assets/edit_darkgrey-24px.png)す。 次に、「実行オプション」タブでエラー管理モ **ードを選択し** ます。 詳しくは、 [アクティビティ実行オプションを参照してくださ](#activity-execution-options)い。

ワークフロー [のプロパティでは](#workflow-properties)、エラー管理に関連する追加のオプションを使用できます。

![](assets/wkf_execution_error.png)

次のオプションを選択できます。

* **[!UICONTROL Supervisors]**:ワークフローでエラーが発生した場合に通知する人のグループ（電子メールおよびアプリ内通知）を定義できます。 グループが定義されていない場合、誰も通知されません。 Adobe Campaign通知について詳しくは、 [Adobe Campaign通知を参照](../../administration/using/sending-internal-notifications.md)。

* **[!UICONTROL In case of error]**:エラーが発生した場合に実行するアクションをアクティビティに指定できます。 これには、次の2つのオプションがあります。

   * **プロセスの中断**:ワークフローは自動的に中断されます。 ワークフローのステータスが「エラー **あり** 」になり、関連付けられた色が赤に変わります。 問題が解決したら、ワークフローを再開します。
   * **無視**:アクティビティは実行されず、その結果、（同じブランチ内の）後続のアクティビティも実行されません。 これは、定期的なタスクに役立ちます。 ブランチのアップストリームにスケジューラーが配置されている場合、これは次の実行日にトリガーされます。

* **[!UICONTROL Consecutive errors]** :ワークフローの実行が自動的に中断される前に、承認された連続する多数のエラーを定義できます。

   * 指定した数がの場合、ま **[!UICONTROL 0]**&#x200B;たは指定した数に達しない限り、エラーが発生したアクティビティは無視されます。 他のワークフローブランチは、通常どおり実行されます。

   * 指定した数に達すると、ワークフロー全体が中断され、になりま **[!UICONTROL Erroneous]**&#x200B;す。 スーパーバイザが定義されている場合は、電子メールで自動的に通知されます。 詳しくは、 [Adobe Campaign通知を参照](../../administration/using/sending-internal-notifications.md)。

## ワークフローのプロパティ {#workflow-properties}

ワークフローの実行オプションを変更するには、ボタンを使用し ![](assets/edit_darkgrey-24px.png) てワークフローのプロパティにアクセスし、セクションを選択 **[!UICONTROL Execution]** します。

![](assets/wkf_execution_6.png)

次のオプションを選択できます。

* **[!UICONTROL Default affinity]**:このフィールドを使用すると、特定のマシン上でワークフローまたはワークフローアクティビティを強制的に実行できます。

* **[!UICONTROL History in days]**:履歴を削除する必要が生じた日数を指定します。 履歴には、ワークフローに関連する要素が含まれます。ログ、タスク、イベント（ワークフロー操作にリンクされた技術オブジェクト）、およびワークフローによってダウンロードされたファイ **[!UICONTROL Transfer file]** ル。 デフォルト値は、標準搭載のワークフローテンプレートの30日です。

   履歴の削除は、データベースのクリーンアップ技術ワークフローによって実行され、デフォルトで毎日実行されます( [テクニカルワークフローのリスト](../../administration/using/technical-workflows.md)を参照)。

   >[!IMPORTANT]
   >
   >このフィ **[!UICONTROL History in days]** ールドを空白のままにすると、その値は「1」と見なされ、1日後に履歴が削除されます。

* **[!UICONTROL Save SQL queries in the log]**:ワークフローのSQLクエリをログに保存できます。

* **[!UICONTROL Keep interim results]**:トランジションの詳細を表示する場合は、このオプションを選択します。 警告：このオプションをチェックすると、ワークフローの実行が大幅に遅くなる可能性があります。

* **[!UICONTROL Execute in the engine (do not use in production)]**:ワークフローをローカルで実行し、開発環境のテストを行います。

* **[!UICONTROL Severity]**:を使用すると、優先度レベルを指定して、ワークフローインスタンスで実行します。 重要なワークフローが最初に実行されます。

このセク **[!UICONTROL Error management]** ションには、エラー時のワークフローの動作を管理する追加のオプションが用意されています。 これらのオプションの詳細は、「エラー管理 [」の節に](#error-management) 記載されます。

## アクティビティプロパティ {#activity-properties}

### アクティビティの一般プロパティ {#general-properties-of-an-activity}

各アクティビティにはタブがあ **[!UICONTROL Properties]** ります。 このタブでは、アクティビティの一般的なパラメータ（特にラベルとID）を変更できます。 このタブの設定はオプションです。

### アクティビティのアウトバウンドトランジション {#managing-an-activity-s-outbound-transitions}

デフォルトでは、特定のアクティビティには送信トランジションがありません。 タブまたはアクティビティのタブ **[!UICONTROL Transitions]** から1つを追加し、同じワ **[!UICONTROL Properties]** ークフロー内の訪問者に他のプロセスを適用できます。

アクティビティに応じて、次の複数のタイプのアウトバウンドトランジションを追加できます。

* 標準トランジション:アクティビティ
* トランジション（母集団なし）:このタイプのアウトバウンドトランジションは、ワークフローを続行するために追加できます。また、システム上の不要な領域を消費しない母集団を含まないこともできます。
* 拒否：母集団が拒否されました。 例えば、アクティビティの受信データが正しくないか不完全であったために処理できなかった場合などです。
* 補数：母集団の実行後に残っているアクティビティです。 例えば、セグメント化アクティビティがインバウンド母集団の割合のみを保存するように設定されている場合、

該当する場合は、アクティビティのア **[!UICONTROL Segment code]** ウトバウンドトランジションを指定します。 このセグメントコードを使用すると、ターゲット母集団のサブセットがどこから来たかを識別し、後でメッセージのパーソナライゼーションの目的で機能する場合があります。

### アクティビティ実行オプション {#activity-execution-options}

アクティビティのプロパティ画面には、アクティビティの実 **[!UICONTROL Advanced options]** 行モードとエラー発生時の動作を定義できるタブがあります。

これらのオプションにアクセスするには、アクティビティ内のワークフローを選択し、アクションバーのボ ![](assets/edit_darkgrey-24px.png) タンを使用して開きます。

![](assets/wkf_advanced_parameters.png)

The **[!UICONTROL Execution]** field allows you to define the action to be carried out when the task is started. これには、次の3つのオプションがあります。

* **標準**:アクティビティは正常に実行されます。
* **有効にするが実行しない**:アクティビティは一時停止され、その結果、後に続くすべてのプロセスも同様になります。 これは、タスクの起動時に表示したい場合に役立ちます。
* **有効にしない**:アクティビティは実行されず、その結果、（同じブランチ内の）後続のアクティビティもすべて実行されません。

このフ **[!UICONTROL In case of error]** ィールドでは、エラーが発生した場合に実行するアクティビティを指定できます。 これには、次の2つのオプションがあります。

* **プロセスの中断**:ワークフローは自動的に中断されます。 ワークフローのステータスが「エラー **あり** 」になり、関連付けられた色が赤に変わります。 問題が解決したら、ワークフローを再開します。
* **無視**:アクティビティは実行されず、その結果、（同じブランチ内の）後続のアクティビティも実行されません。 これは、定期的なタスクに役立ちます。 ブランチのアップストリームにスケジューラーが配置されている場合、これは次の実行日にトリガーされます。

このフ **[!UICONTROL Behavior]** ィールドでは、非同期タスクを使用する場合の手順を定義できます。 これには、次の2つのオプションがあります。

* **複数のタスク**:最初のタスクが完了しなかった場合でも、複数のイベントを同時に実行できます。
* **現在のタスクの優先度**:タスクが進行中の場合は、これが優先されます。 1つのタスクが進行中の限り、他のタスクは実行されません。

このフ **[!UICONTROL Max. execution duration]** ィールドでは、「30秒」や「1時間」などの期間を指定できます。 指定したアクティビティが経過した後に期間が終了しない場合は、アラートがトリガーされます。 これは、ワークフローの機能には影響しません。

このフ **[!UICONTROL Affinity]** ィールドを使用すると、特定のマシン上でワークフローまたはワークフローアクティビティを強制的に実行できます。 これを行うには、対象のワークフローまたはアフィニティの1つまたは複数のアクティビティを指定する必要があります。

このフ **[!UICONTROL Time zone]** ィールドでは、タイムゾーンを選択できます。アクティビティ Adobe Campaignを使用すると、同じインスタンスで複数の国の時間差を管理できます。 適用される設定は、インスタンスの作成時に設定されます。

>[!NOTE]
>
>デフォルトでは、タイムゾーンが選択されていない場合、アクティビティはワークフローのプロパティで定義されたタイムゾーンを使用します。

The **Comment** field is a free field that allows you to add a note.
